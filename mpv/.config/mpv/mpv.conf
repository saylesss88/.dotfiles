# Hardware decoding: Explicitly use VA-API for Vega 8 (faster, power-efficient)
hwdec=vaapi
# Fallback to software decoding if VA-API fails (e.g., unsupported codecs)
hwdec-codecs=all

# Video output: Use modern 'gpu' VO with Vulkan backend for best performance
vo=gpu
# Prefer Vulkan for rendering (faster than OpenGL on amdgpu)
gpu-api=vulkan
# Fallback to OpenGL if Vulkan is unavailable
gpu-context=auto

# Scaling: Use spline36 for sharp, less GPU-intensive scaling (good for 1080p/4K)
scale=spline36
cscale=spline36
# Alternative: ewa_lanczos for sharper 4K (uncomment if preferred, heavier)
# scale=ewa_lanczos
# cscale=ewa_lanczos

# Debanding: Reduce color banding in gradients (lightweight for Vega 8)
vf=deband=grain=8:range=16

# Visual tweaks: Subtle contrast/brightness for better visuals
contrast=1.10
brightness=0.05

# Audio: Normalize volume for consistent playback
audio-normalize-downmix=yes
# Use PulseAudio or PipeWire (common on Arch) for low-latency audio
audio-device=auto

# Frame dropping: Allow minimal dropping for smoother playback under heavy load
framedrop=vo
# Interpolation: Enable for smoother motion (light load on Vega 8)
video-sync=display-resample
interpolation=yes
tscale=oversample

# Cache: Optimized for streaming and local playback
cache=yes
cache-secs=10          # Reduced for faster seeking, sufficient for most streams
demuxer-readahead-secs=10  # Lowered for responsiveness
demuxer-max-bytes=20MiB    # Lowered to reduce RAM usage (20MB)

# Subtitles: Optimized for readability, lower GPU load
sub-auto=fuzzy
sub-font="Arial"
sub-font-size=32       # Slightly smaller for performance
sub-color="#FFFFFF"
sub-shadow-offset=1.5  # Lighter shadow for less GPU work
sub-blur=0.5           # Subtle blur for smoother text

# Window: Force window for audio-only playback
force-window=yes

# Profile for low-latency (e.g., streaming, live content)
[low-latency]
profile=gpu-hq         # High-quality GPU rendering
video-sync=display-resample
interpolation=no       # Disable for lower latency
opengl-glfinish=yes    # Ensure frame completion
gpu-sw=no              # Force hardware rendering

# Profile for 4K playback (optional, toggle with --profile=4k)
[4k]
scale=ewa_lanczos     # Sharper scaling for 4K
cscale=ewa_lanczos
vf=deband=grain=16:range=32  # Stronger debanding for high-res
cache-secs=20         # Larger cache for 4K streams
demuxer-max-bytes=40MiB
